<button id="btnOn">LED Aan</button>
<button id="btnOff">LED Uit</button>
<div id="led" style="width:50px; height:50px; border-radius:50%; background-color:red; margin-top:20px;"></div>
<div id="ledStatus">OFF</div>

<script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
<script>
const client = mqtt.connect('ws://poci.n-soft.net:9001');

client.on('connect', () => {
  console.log("MQTT verbonden");
  client.subscribe('hmi/led');
});

client.on('message', (topic, message) => {
  if (topic === 'hmi/led') {
    const msg = message.toString();
    console.log("Ontvangen:", msg);
    updateLed(msg === 'on');
  }
});

function updateLed(state) {
  const led = document.getElementById('led');
  const status = document.getElementById('ledStatus');
  if (state) {
    led.style.backgroundColor = 'green';
    status.textContent = 'ON';
  } else {
    led.style.backgroundColor = 'red';
    status.textContent = 'OFF';
  }
}

document.getElementById('btnOn').addEventListener('click', () => {
  client.publish('hmi/led', 'on');
});

document.getElementById('btnOff').addEventListener('click', () => {
  client.publish('hmi/led', 'off');
});
</script>

